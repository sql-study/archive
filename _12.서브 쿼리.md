# 서브 쿼리

하나의 쿼리 블록으로 구성된 쿼리. 쿼리 블록은 다른 쿼리 블록을 포함할 수 있다. 다른 쿼리 블록에 초함된 쿼리 블록을 **서브 쿼리**, 다른 쿼리 블록을 포함한 쿼리 블록을 **메인 쿼리**



![image-20200321201322549](https://tva1.sinaimg.cn/large/00831rSTgy1gd1rhfhsmcj30z40f6thl.jpg)



서브 쿼리는 사용 위치에 따라 중첩 서브 쿼리, 스칼라 서브 쿼리, 인라인 뷰



**중첩 서브 쿼리 - WHERE 절, HAVING 절**

**스칼라 서브 쿼리 - SELECT 절**

**인라인 뷰 - FROM 절**



```sql
DROP TABLE t1 PURGE;
DROP TABLE t2 PURGE;

CREATE TABLE t1(c1 NUMBER NOT NULL, C2 NUMBER NOT NULL);
CREATE TABLE t2(c1 NUMBER NOT NULL, C2 NUMBER);

INSERT INTO t1 VALUES (1, 2);
INSERT INTO t1 VALUES (2, 1);
INSERT INTO t1 VALUES (2, 3);
INSERT INTO t1 VALUES (3, 4);
INSERT INTO t2 VALUES (1, 2);
INSERT INTO t2 VALUES (2, 3);
INSERT INTO t2 VALUES (3, NULL);
```

## 1. 중첩 서브 쿼리

중첩 서브 쿼리는 WHERE 절과 HAVING 절에 사용하는 서브 쿼리.

```
비상관 서브 쿼리 - 메인 쿼리와 관계 없음.
상관 서브 쿼리 - 메인 쿼리와 관계 있음.
```

서브 쿼리가 반환하는 행의 개수에 따라 단일 행 서브 쿼리와 다중 행 서브 쿼리로도 구분

```
단일 행 서브 쿼리 - 서브 쿼리가 단일 행을 반환
다중 행 서브 쿼리 - 서브 쿼리가 다중 행을 반환
```

### 1.1 비상관 서브 쿼리

- 메인 쿼리와 관계가 없는 서브 쿼리. 서브 쿼리의 WHERE 절에 메인 쿼리와의 조인 조건이 존재하지 않는다.
- 비상관 서브 쿼리가 반환하는 행의 개수에 따라 단일 행 비상관 서브 쿼리와 다중 행 비상관 서브 쿼리로 구분

